{"version":3,"file":"wavesurfer.markers.min.js","mappings":"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","sources":["webpack://WaveSurfer/webpack/universalModuleDefinition","webpack://WaveSurfer/webpack/bootstrap","webpack://WaveSurfer/webpack/runtime/define property getters","webpack://WaveSurfer/webpack/runtime/hasOwnProperty shorthand","webpack://WaveSurfer/webpack/runtime/make namespace object","webpack://WaveSurfer/./src/plugin/markers/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"WaveSurfer\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WaveSurfer\"] = factory();\n\telse\n\t\troot[\"WaveSurfer\"] = root[\"WaveSurfer\"] || {}, root[\"WaveSurfer\"][\"markers\"] = factory();\n})(self, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\r\n * @typedef {Object} MarkerParams\r\n * @desc The parameters used to describe a marker.\r\n * @example wavesurfer.addMarker(regionParams);\r\n * @property {number} time The time to set the marker at\r\n * @property {?label} string An optional marker label\r\n * @property {?color} string Background color for marker\r\n * @property {?position} string \"top\" or \"bottom\", defaults to \"bottom\"\r\n * @property {?markerElement} element An HTML element to display instead of the default marker image\r\n * @property {?draggable} boolean Set marker as draggable, defaults to false\r\n */\r\n\r\n\r\n/**\r\n * Markers are points in time in the audio that can be jumped to.\r\n *\r\n * @implements {PluginClass}\r\n *\r\n * @example\r\n * import MarkersPlugin from 'wavesurfer.markers.js';\r\n *\r\n * // if you are using <script> tags\r\n * var MarkerPlugin = window.WaveSurfer.markers;\r\n *\r\n * // ... initialising wavesurfer with the plugin\r\n * var wavesurfer = WaveSurfer.create({\r\n *   // wavesurfer options ...\r\n *   plugins: [\r\n *     MarkersPlugin.create({\r\n *       // plugin options ...\r\n *     })\r\n *   ]\r\n * });\r\n */\r\n\r\nconst DEFAULT_FILL_COLOR = \"#D8D8D8\";\r\nconst DEFAULT_POSITION = \"bottom\";\r\n\r\nexport default class MarkersPlugin {\r\n    /**\r\n     * @typedef {Object} MarkersPluginParams\r\n     * @property {?MarkerParams[]} markers Initial set of markers\r\n     * @fires MarkersPlugin#marker-click\r\n     * @fires MarkersPlugin#marker-drag\r\n     * @fires MarkersPlugin#marker-drop\r\n     */\r\n\r\n    /**\r\n     * Markers plugin definition factory\r\n     *\r\n     * This function must be used to create a plugin definition which can be\r\n     * used by wavesurfer to correctly instantiate the plugin.\r\n     *\r\n     * @param {MarkersPluginParams} params parameters use to initialise the plugin\r\n     * @since 4.6.0\r\n     * @return {PluginDefinition} an object representing the plugin\r\n     */\r\n    static create(params) {\r\n        return {\r\n            name: 'markers',\r\n            deferInit: params && params.deferInit ? params.deferInit : false,\r\n            params: params,\r\n            staticProps: {\r\n                addMarker(options) {\r\n                    if (!this.initialisedPluginList.markers) {\r\n                        this.initPlugin('markers');\r\n                    }\r\n                    return this.markers.add(options);\r\n                },\r\n                clearMarkers() {\r\n                    this.markers && this.markers.clear();\r\n                }\r\n            },\r\n            instance: MarkersPlugin\r\n        };\r\n    }\r\n\r\n    constructor(params, ws) {\r\n        this.params = params;\r\n        this.wavesurfer = ws;\r\n        this.util = ws.util;\r\n        this.style = this.util.style;\r\n        this.markerLineWidth = 1;\r\n        this.markerWidth = 11;\r\n        this.markerHeight = 22;\r\n        this.dragging = false;\r\n\r\n\r\n        this._onResize = () => {\r\n            this._updateMarkerPositions();\r\n        };\r\n\r\n        this._onBackendCreated = () => {\r\n            this.wrapper = this.wavesurfer.drawer.wrapper;\r\n            if (this.params.markers) {\r\n                this.params.markers.forEach(marker => this.add(marker));\r\n            }\r\n            window.addEventListener('resize', this._onResize, true);\r\n            window.addEventListener('orientationchange', this._onResize, true);\r\n            this.wavesurfer.on('zoom', this._onResize);\r\n\r\n            if (!this.markers.find(marker => marker.draggable)){\r\n                return;\r\n            }\r\n\r\n            this.onMouseMove = (e) => this._onMouseMove(e);\r\n            window.addEventListener('mousemove', this.onMouseMove);\r\n\r\n            this.onMouseUp = (e) => this._onMouseUp(e);\r\n            window.addEventListener(\"mouseup\", this.onMouseUp);\r\n        };\r\n\r\n        this.markers = [];\r\n        this._onReady = () => {\r\n            this.wrapper = this.wavesurfer.drawer.wrapper;\r\n            this._updateMarkerPositions();\r\n        };\r\n    }\r\n\r\n    init() {\r\n        // Check if ws is ready\r\n        if (this.wavesurfer.isReady) {\r\n            this._onBackendCreated();\r\n            this._onReady();\r\n        } else {\r\n            this.wavesurfer.once('ready', this._onReady);\r\n            this.wavesurfer.once('backend-created', this._onBackendCreated);\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        this.wavesurfer.un('ready', this._onReady);\r\n        this.wavesurfer.un('backend-created', this._onBackendCreated);\r\n\r\n        this.wavesurfer.un('zoom', this._onResize);\r\n\r\n        window.removeEventListener('resize', this._onResize, true);\r\n        window.removeEventListener('orientationchange', this._onResize, true);\r\n\r\n        if (this.onMouseMove) {\r\n            window.removeEventListener('mousemove', this.onMouseMove);\r\n        }\r\n        if (this.onMouseUp) {\r\n            window.removeEventListener(\"mouseup\", this.onMouseUp);\r\n        }\r\n\r\n        this.clear();\r\n    }\r\n\r\n    /**\r\n     * Add a marker\r\n     *\r\n     * @param {MarkerParams} params Marker definition\r\n     * @return {object} The created marker\r\n     */\r\n    add(params) {\r\n        let marker = {\r\n            time: params.time,\r\n            label: params.label,\r\n            color: params.color || DEFAULT_FILL_COLOR,\r\n            position: params.position || DEFAULT_POSITION,\r\n            draggable: !!params.draggable\r\n        };\r\n\r\n        marker.el = this._createMarkerElement(marker, params.markerElement);\r\n\r\n        this.wrapper.appendChild(marker.el);\r\n        this.markers.push(marker);\r\n        this._updateMarkerPositions();\r\n\r\n        return marker;\r\n    }\r\n\r\n    /**\r\n     * Remove a marker\r\n     *\r\n     * @param {number} index Index of the marker to remove\r\n     */\r\n    remove(index) {\r\n        let marker = this.markers[index];\r\n        if (!marker) {\r\n            return;\r\n        }\r\n\r\n        this.wrapper.removeChild(marker.el);\r\n        this.markers.splice(index, 1);\r\n    }\r\n\r\n    _createPointerSVG(color, position) {\r\n        const svgNS = \"http://www.w3.org/2000/svg\";\r\n\r\n        const el = document.createElementNS(svgNS, \"svg\");\r\n        const polygon = document.createElementNS(svgNS, \"polygon\");\r\n\r\n        el.setAttribute(\"viewBox\", \"0 0 40 80\");\r\n\r\n        polygon.setAttribute(\"id\", \"polygon\");\r\n        polygon.setAttribute(\"stroke\", \"#979797\");\r\n        polygon.setAttribute(\"fill\", color);\r\n        polygon.setAttribute(\"points\", \"20 0 40 30 40 80 0 80 0 30\");\r\n        if ( position == \"top\" ) {\r\n            polygon.setAttribute(\"transform\", \"rotate(180, 20 40)\");\r\n        }\r\n\r\n        el.appendChild(polygon);\r\n\r\n        this.style(el, {\r\n            width: this.markerWidth + \"px\",\r\n            height: this.markerHeight + \"px\",\r\n            \"min-width\": this.markerWidth + \"px\",\r\n            \"margin-right\": \"5px\",\r\n            \"z-index\": 4\r\n        });\r\n        return el;\r\n    }\r\n\r\n    _createMarkerElement(marker, markerElement) {\r\n        let label = marker.label;\r\n\r\n        const el = document.createElement('marker');\r\n        el.className = \"wavesurfer-marker\";\r\n\r\n        this.style(el, {\r\n            position: \"absolute\",\r\n            height: \"100%\",\r\n            display: \"flex\",\r\n            overflow: \"hidden\",\r\n            \"flex-direction\": (marker.position == \"top\" ? \"column-reverse\" : \"column\")\r\n        });\r\n\r\n        const line = document.createElement('div');\r\n        const width = markerElement ? markerElement.width : this.markerWidth;\r\n        marker.offset = (width - this.markerLineWidth) / 2;\r\n        this.style(line, {\r\n            \"flex-grow\": 1,\r\n            \"margin-left\": marker.offset + \"px\",\r\n            background: \"black\",\r\n            width: this.markerLineWidth + \"px\",\r\n            opacity: 0.1\r\n        });\r\n        el.appendChild(line);\r\n\r\n        const labelDiv = document.createElement('div');\r\n        const point = markerElement || this._createPointerSVG(marker.color, marker.position);\r\n        if (marker.draggable){\r\n            point.draggable = false;\r\n        }\r\n        labelDiv.appendChild(point);\r\n\r\n        if ( label ) {\r\n            const labelEl = document.createElement('span');\r\n            labelEl.innerText = label;\r\n            this.style(labelEl, {\r\n                \"font-family\": \"monospace\",\r\n                \"font-size\": \"90%\"\r\n            });\r\n            labelDiv.appendChild(labelEl);\r\n        }\r\n\r\n        this.style(labelDiv, {\r\n            display: \"flex\",\r\n            \"align-items\": \"center\",\r\n            cursor: \"pointer\"\r\n        });\r\n\r\n        el.appendChild(labelDiv);\r\n\r\n        labelDiv.addEventListener(\"click\", e => {\r\n            e.stopPropagation();\r\n            // Click event is caught when the marker-drop event was dispatched.\r\n            // Drop event was dispatched at this moment, but this.dragging\r\n            // is waiting for the next tick to set as false\r\n            if (this.dragging){\r\n                return;\r\n            }\r\n            this.wavesurfer.setCurrentTime(marker.time);\r\n            this.wavesurfer.fireEvent(\"marker-click\", marker, e);\r\n        });\r\n\r\n        if (marker.draggable) {\r\n            labelDiv.addEventListener(\"mousedown\", e => {\r\n                this.selectedMarker = marker;\r\n            });\r\n        }\r\n        return el;\r\n    }\r\n\r\n    _updateMarkerPositions() {\r\n        for ( let i = 0 ; i < this.markers.length; i++ ) {\r\n            let marker = this.markers[i];\r\n            this._updateMarkerPosition(marker);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update a marker position based on its time property.\r\n     *\r\n     * @private\r\n     * @param {MarkerParams} params The marker to update.\r\n     * @returns {void}\r\n     */\r\n    _updateMarkerPosition(params) {\r\n        const duration = this.wavesurfer.getDuration();\r\n        const elementWidth =\r\n            this.wavesurfer.drawer.width /\r\n            this.wavesurfer.params.pixelRatio;\r\n\r\n        const positionPct = Math.min(params.time / duration, 1);\r\n        const leftPx = ((elementWidth * positionPct) - params.offset);\r\n        this.style(params.el, {\r\n            \"left\": leftPx + \"px\",\r\n            \"max-width\": (elementWidth - leftPx) + \"px\"\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Fires `marker-drag` event, update the `time` property for the\r\n     * selected marker based on the mouse position, and calls to update\r\n     * its position.\r\n     *\r\n     * @private\r\n     * @param {MouseEvent} event The mouse event.\r\n     * @returns {void}\r\n     */\r\n    _onMouseMove(event) {\r\n        if (!this.selectedMarker){\r\n            return;\r\n        }\r\n        if (!this.dragging){\r\n            this.dragging = true;\r\n            this.wavesurfer.fireEvent(\"marker-drag\", this.selectedMarker, event);\r\n        }\r\n        this.selectedMarker.time = this.wavesurfer.drawer.handleEvent(event) * this.wavesurfer.getDuration();\r\n        this._updateMarkerPositions();\r\n    }\r\n\r\n    /**\r\n     * Fires `marker-drop` event and unselect the dragged marker.\r\n     *\r\n     * @private\r\n     * @param {MouseEvent} event The mouse event.\r\n     * @returns {void}\r\n     */\r\n    _onMouseUp(event) {\r\n        if (this.selectedMarker) {\r\n            setTimeout(() => {\r\n                this.selectedMarker = false;\r\n                this.dragging = false;\r\n            }, 0);\r\n        }\r\n\r\n        if (!this.dragging) {\r\n            return;\r\n        }\r\n\r\n        event.stopPropagation();\r\n        const duration = this.wavesurfer.getDuration();\r\n        this.selectedMarker.time = this.wavesurfer.drawer.handleEvent(event) * duration;\r\n        this._updateMarkerPositions();\r\n        this.wavesurfer.fireEvent(\"marker-drop\", this.selectedMarker, event);\r\n    }\r\n\r\n    /**\r\n     * Remove all markers\r\n     */\r\n    clear() {\r\n        while ( this.markers.length > 0 ) {\r\n            this.remove(0);\r\n        }\r\n    }\r\n}\r\n"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","MarkersPlugin","params","name","deferInit","staticProps","addMarker","options","this","initialisedPluginList","markers","initPlugin","add","clearMarkers","clear","instance","constructor","ws","wavesurfer","util","style","markerLineWidth","markerWidth","markerHeight","dragging","_onResize","_updateMarkerPositions","_onBackendCreated","wrapper","drawer","forEach","marker","window","addEventListener","on","find","draggable","onMouseMove","e","_onMouseMove","onMouseUp","_onMouseUp","_onReady","init","isReady","once","destroy","un","removeEventListener","time","label","color","position","el","_createMarkerElement","markerElement","appendChild","push","remove","index","removeChild","splice","_createPointerSVG","svgNS","document","createElementNS","polygon","setAttribute","width","height","createElement","className","display","overflow","line","offset","background","opacity","labelDiv","point","labelEl","innerText","cursor","stopPropagation","setCurrentTime","fireEvent","selectedMarker","i","length","_updateMarkerPosition","duration","getDuration","elementWidth","pixelRatio","leftPx","Math","min","event","handleEvent","setTimeout"],"sourceRoot":""}