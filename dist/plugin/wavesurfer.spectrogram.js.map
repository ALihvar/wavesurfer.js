{"version":3,"file":"wavesurfer.spectrogram.js","mappings":"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","sources":["webpack://WaveSurfer/webpack/universalModuleDefinition","webpack://WaveSurfer/./src/plugin/spectrogram/fft.js","webpack://WaveSurfer/webpack/bootstrap","webpack://WaveSurfer/webpack/runtime/define property getters","webpack://WaveSurfer/webpack/runtime/hasOwnProperty shorthand","webpack://WaveSurfer/webpack/runtime/make namespace object","webpack://WaveSurfer/./src/plugin/spectrogram/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"WaveSurfer\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WaveSurfer\"] = factory();\n\telse\n\t\troot[\"WaveSurfer\"] = root[\"WaveSurfer\"] || {}, root[\"WaveSurfer\"][\"spectrogram\"] = factory();\n})(self, () => {\nreturn ","/* eslint-disable complexity, no-redeclare, no-var, one-var */\r\n\r\n/**\r\n * Calculate FFT - Based on https://github.com/corbanbrook/dsp.js\r\n *\r\n * @param {Number} bufferSize Buffer size\r\n * @param {Number} sampleRate Sample rate\r\n * @param {Function} windowFunc Window function\r\n * @param {Number} alpha Alpha channel\r\n */\r\nexport default function FFT(bufferSize, sampleRate, windowFunc, alpha) {\r\n    this.bufferSize = bufferSize;\r\n    this.sampleRate = sampleRate;\r\n    this.bandwidth = (2 / bufferSize) * (sampleRate / 2);\r\n\r\n    this.sinTable = new Float32Array(bufferSize);\r\n    this.cosTable = new Float32Array(bufferSize);\r\n    this.windowValues = new Float32Array(bufferSize);\r\n    this.reverseTable = new Uint32Array(bufferSize);\r\n\r\n    this.peakBand = 0;\r\n    this.peak = 0;\r\n\r\n    var i;\r\n    switch (windowFunc) {\r\n        case 'bartlett':\r\n            for (i = 0; i < bufferSize; i++) {\r\n                this.windowValues[i] =\r\n                    (2 / (bufferSize - 1)) *\r\n                    ((bufferSize - 1) / 2 - Math.abs(i - (bufferSize - 1) / 2));\r\n            }\r\n            break;\r\n        case 'bartlettHann':\r\n            for (i = 0; i < bufferSize; i++) {\r\n                this.windowValues[i] =\r\n                    0.62 -\r\n                    0.48 * Math.abs(i / (bufferSize - 1) - 0.5) -\r\n                    0.38 * Math.cos((Math.PI * 2 * i) / (bufferSize - 1));\r\n            }\r\n            break;\r\n        case 'blackman':\r\n            alpha = alpha || 0.16;\r\n            for (i = 0; i < bufferSize; i++) {\r\n                this.windowValues[i] =\r\n                    (1 - alpha) / 2 -\r\n                    0.5 * Math.cos((Math.PI * 2 * i) / (bufferSize - 1)) +\r\n                    (alpha / 2) *\r\n                        Math.cos((4 * Math.PI * i) / (bufferSize - 1));\r\n            }\r\n            break;\r\n        case 'cosine':\r\n            for (i = 0; i < bufferSize; i++) {\r\n                this.windowValues[i] = Math.cos(\r\n                    (Math.PI * i) / (bufferSize - 1) - Math.PI / 2\r\n                );\r\n            }\r\n            break;\r\n        case 'gauss':\r\n            alpha = alpha || 0.25;\r\n            for (i = 0; i < bufferSize; i++) {\r\n                this.windowValues[i] = Math.pow(\r\n                    Math.E,\r\n                    -0.5 *\r\n                        Math.pow(\r\n                            (i - (bufferSize - 1) / 2) /\r\n                                ((alpha * (bufferSize - 1)) / 2),\r\n                            2\r\n                        )\r\n                );\r\n            }\r\n            break;\r\n        case 'hamming':\r\n            for (i = 0; i < bufferSize; i++) {\r\n                this.windowValues[i] =\r\n                    0.54 -\r\n                    0.46 * Math.cos((Math.PI * 2 * i) / (bufferSize - 1));\r\n            }\r\n            break;\r\n        case 'hann':\r\n        case undefined:\r\n            for (i = 0; i < bufferSize; i++) {\r\n                this.windowValues[i] =\r\n                    0.5 * (1 - Math.cos((Math.PI * 2 * i) / (bufferSize - 1)));\r\n            }\r\n            break;\r\n        case 'lanczoz':\r\n            for (i = 0; i < bufferSize; i++) {\r\n                this.windowValues[i] =\r\n                    Math.sin(Math.PI * ((2 * i) / (bufferSize - 1) - 1)) /\r\n                    (Math.PI * ((2 * i) / (bufferSize - 1) - 1));\r\n            }\r\n            break;\r\n        case 'rectangular':\r\n            for (i = 0; i < bufferSize; i++) {\r\n                this.windowValues[i] = 1;\r\n            }\r\n            break;\r\n        case 'triangular':\r\n            for (i = 0; i < bufferSize; i++) {\r\n                this.windowValues[i] =\r\n                    (2 / bufferSize) *\r\n                    (bufferSize / 2 - Math.abs(i - (bufferSize - 1) / 2));\r\n            }\r\n            break;\r\n        default:\r\n            throw Error(\"No such window function '\" + windowFunc + \"'\");\r\n    }\r\n\r\n    var limit = 1;\r\n    var bit = bufferSize >> 1;\r\n    var i;\r\n\r\n    while (limit < bufferSize) {\r\n        for (i = 0; i < limit; i++) {\r\n            this.reverseTable[i + limit] = this.reverseTable[i] + bit;\r\n        }\r\n\r\n        limit = limit << 1;\r\n        bit = bit >> 1;\r\n    }\r\n\r\n    for (i = 0; i < bufferSize; i++) {\r\n        this.sinTable[i] = Math.sin(-Math.PI / i);\r\n        this.cosTable[i] = Math.cos(-Math.PI / i);\r\n    }\r\n\r\n    this.calculateSpectrum = function(buffer) {\r\n        // Locally scope variables for speed up\r\n        var bufferSize = this.bufferSize,\r\n            cosTable = this.cosTable,\r\n            sinTable = this.sinTable,\r\n            reverseTable = this.reverseTable,\r\n            real = new Float32Array(bufferSize),\r\n            imag = new Float32Array(bufferSize),\r\n            bSi = 2 / this.bufferSize,\r\n            sqrt = Math.sqrt,\r\n            rval,\r\n            ival,\r\n            mag,\r\n            spectrum = new Float32Array(bufferSize / 2);\r\n\r\n        var k = Math.floor(Math.log(bufferSize) / Math.LN2);\r\n\r\n        if (Math.pow(2, k) !== bufferSize) {\r\n            throw 'Invalid buffer size, must be a power of 2.';\r\n        }\r\n        if (bufferSize !== buffer.length) {\r\n            throw 'Supplied buffer is not the same size as defined FFT. FFT Size: ' +\r\n                bufferSize +\r\n                ' Buffer Size: ' +\r\n                buffer.length;\r\n        }\r\n\r\n        var halfSize = 1,\r\n            phaseShiftStepReal,\r\n            phaseShiftStepImag,\r\n            currentPhaseShiftReal,\r\n            currentPhaseShiftImag,\r\n            off,\r\n            tr,\r\n            ti,\r\n            tmpReal;\r\n\r\n        for (var i = 0; i < bufferSize; i++) {\r\n            real[i] =\r\n                buffer[reverseTable[i]] * this.windowValues[reverseTable[i]];\r\n            imag[i] = 0;\r\n        }\r\n\r\n        while (halfSize < bufferSize) {\r\n            phaseShiftStepReal = cosTable[halfSize];\r\n            phaseShiftStepImag = sinTable[halfSize];\r\n\r\n            currentPhaseShiftReal = 1;\r\n            currentPhaseShiftImag = 0;\r\n\r\n            for (var fftStep = 0; fftStep < halfSize; fftStep++) {\r\n                var i = fftStep;\r\n\r\n                while (i < bufferSize) {\r\n                    off = i + halfSize;\r\n                    tr =\r\n                        currentPhaseShiftReal * real[off] -\r\n                        currentPhaseShiftImag * imag[off];\r\n                    ti =\r\n                        currentPhaseShiftReal * imag[off] +\r\n                        currentPhaseShiftImag * real[off];\r\n\r\n                    real[off] = real[i] - tr;\r\n                    imag[off] = imag[i] - ti;\r\n                    real[i] += tr;\r\n                    imag[i] += ti;\r\n\r\n                    i += halfSize << 1;\r\n                }\r\n\r\n                tmpReal = currentPhaseShiftReal;\r\n                currentPhaseShiftReal =\r\n                    tmpReal * phaseShiftStepReal -\r\n                    currentPhaseShiftImag * phaseShiftStepImag;\r\n                currentPhaseShiftImag =\r\n                    tmpReal * phaseShiftStepImag +\r\n                    currentPhaseShiftImag * phaseShiftStepReal;\r\n            }\r\n\r\n            halfSize = halfSize << 1;\r\n        }\r\n\r\n        for (var i = 0, N = bufferSize / 2; i < N; i++) {\r\n            rval = real[i];\r\n            ival = imag[i];\r\n            mag = bSi * sqrt(rval * rval + ival * ival);\r\n\r\n            if (mag > this.peak) {\r\n                this.peakBand = i;\r\n                this.peak = mag;\r\n            }\r\n            spectrum[i] = mag;\r\n        }\r\n        return spectrum;\r\n    };\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* eslint-enable complexity, no-redeclare, no-var, one-var */\r\n\r\nimport FFT from './fft';\r\n\r\n/**\r\n * @typedef {Object} SpectrogramPluginParams\r\n * @property {string|HTMLElement} container Selector of element or element in\r\n * which to render\r\n * @property {number} fftSamples=512 Number of samples to fetch to FFT. Must be\r\n * a power of 2.\r\n * @property {boolean} splitChannels=false Render with separate spectrograms for\r\n * the channels of the audio\r\n * @property {boolean} labels Set to true to display frequency labels.\r\n * @property {number} noverlap Size of the overlapping window. Must be <\r\n * fftSamples. Auto deduced from canvas size by default.\r\n * @property {string} windowFunc='hann' The window function to be used. One of\r\n * these: `'bartlett'`, `'bartlettHann'`, `'blackman'`, `'cosine'`, `'gauss'`,\r\n * `'hamming'`, `'hann'`, `'lanczoz'`, `'rectangular'`, `'triangular'`\r\n * @property {?number} alpha Some window functions have this extra value.\r\n * (Between 0 and 1)\r\n * @property {number} pixelRatio=wavesurfer.params.pixelRatio to control the\r\n * size of the spectrogram in relation with its canvas. 1 = Draw on the whole\r\n * canvas. 2 = Draw on a quarter (1/2 the length and 1/2 the width)\r\n * @property {number} frequencyMin=0 Min frequency to scale spectrogram.\r\n * @property {number} frequencyMax=12000 Max frequency to scale spectrogram.\r\n * Set this to samplerate/2 to draw whole range of spectrogram.\r\n * @property {?boolean} deferInit Set to true to manually call\r\n * `initPlugin('spectrogram')`\r\n * @property {?number[][]} colorMap A 256 long array of 4-element arrays.\r\n * Each entry should contain a float between 0 and 1 and specify\r\n * r, g, b, and alpha.\r\n */\r\n\r\n/**\r\n * Render a spectrogram visualisation of the audio.\r\n *\r\n * @implements {PluginClass}\r\n * @extends {Observer}\r\n * @example\r\n * // es6\r\n * import SpectrogramPlugin from 'wavesurfer.spectrogram.js';\r\n *\r\n * // commonjs\r\n * var SpectrogramPlugin = require('wavesurfer.spectrogram.js');\r\n *\r\n * // if you are using <script> tags\r\n * var SpectrogramPlugin = window.WaveSurfer.spectrogram;\r\n *\r\n * // ... initialising wavesurfer with the plugin\r\n * var wavesurfer = WaveSurfer.create({\r\n *   // wavesurfer options ...\r\n *   plugins: [\r\n *     SpectrogramPlugin.create({\r\n *       // plugin options ...\r\n *     })\r\n *   ]\r\n * });\r\n */\r\nexport default class SpectrogramPlugin {\r\n    /**\r\n     * Spectrogram plugin definition factory\r\n     *\r\n     * This function must be used to create a plugin definition which can be\r\n     * used by wavesurfer to correctly instantiate the plugin.\r\n     *\r\n     * @param  {SpectrogramPluginParams} params Parameters used to initialise the plugin\r\n     * @return {PluginDefinition} An object representing the plugin.\r\n     */\r\n    static create(params) {\r\n        return {\r\n            name: 'spectrogram',\r\n            deferInit: params && params.deferInit ? params.deferInit : false,\r\n            params: params,\r\n            staticProps: {\r\n                FFT: FFT\r\n            },\r\n            instance: SpectrogramPlugin\r\n        };\r\n    }\r\n\r\n    constructor(params, ws) {\r\n        this.params = params;\r\n        this.wavesurfer = ws;\r\n        this.util = ws.util;\r\n\r\n        this.frequenciesDataUrl = params.frequenciesDataUrl;\r\n        this._onScroll = e => {\r\n            this.updateScroll(e);\r\n        };\r\n        this._onRender = () => {\r\n            this.render();\r\n        };\r\n        this._onWrapperClick = e => {\r\n            this._wrapperClickHandler(e);\r\n        };\r\n        this._onReady = () => {\r\n            const drawer = (this.drawer = ws.drawer);\r\n\r\n            this.container =\r\n                'string' == typeof params.container\r\n                    ? document.querySelector(params.container)\r\n                    : params.container;\r\n\r\n            if (!this.container) {\r\n                throw Error('No container for WaveSurfer spectrogram');\r\n            }\r\n            if (params.colorMap) {\r\n                if (params.colorMap.length < 256) {\r\n                    throw new Error('Colormap must contain 256 elements');\r\n                }\r\n                for (let i = 0; i < params.colorMap.length; i++) {\r\n                    const cmEntry = params.colorMap[i];\r\n                    if (cmEntry.length !== 4) {\r\n                        throw new Error(\r\n                            'ColorMap entries must contain 4 values'\r\n                        );\r\n                    }\r\n                }\r\n                this.colorMap = params.colorMap;\r\n            } else {\r\n                this.colorMap = [];\r\n                for (let i = 0; i < 256; i++) {\r\n                    const val = (255 - i) / 256;\r\n                    this.colorMap.push([val, val, val, 1]);\r\n                }\r\n            }\r\n            this.width = drawer.width;\r\n            this.pixelRatio = this.params.pixelRatio || ws.params.pixelRatio;\r\n            this.fftSamples =\r\n                this.params.fftSamples || ws.params.fftSamples || 512;\r\n            this.height = this.fftSamples / 2;\r\n            this.noverlap = params.noverlap;\r\n            this.windowFunc = params.windowFunc;\r\n            this.alpha = params.alpha;\r\n            this.splitChannels = params.splitChannels;\r\n            this.channels = this.splitChannels ? ws.backend.buffer.numberOfChannels : 1;\r\n\r\n            // Getting file's original samplerate is difficult(#1248).\r\n            // So set 12kHz default to render like wavesurfer.js 5.x.\r\n            this.frequencyMin = params.frequencyMin || 0;\r\n            this.frequencyMax = params.frequencyMax || 12000;\r\n\r\n            this.createWrapper();\r\n            this.createCanvas();\r\n            this.render();\r\n\r\n            drawer.wrapper.addEventListener('scroll', this._onScroll);\r\n            ws.on('redraw', this._onRender);\r\n        };\r\n    }\r\n\r\n    init() {\r\n        // Check if wavesurfer is ready\r\n        if (this.wavesurfer.isReady) {\r\n            this._onReady();\r\n        } else {\r\n            this.wavesurfer.once('ready', this._onReady);\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        this.unAll();\r\n        this.wavesurfer.un('ready', this._onReady);\r\n        this.wavesurfer.un('redraw', this._onRender);\r\n        this.drawer && this.drawer.wrapper.removeEventListener('scroll', this._onScroll);\r\n        this.wavesurfer = null;\r\n        this.util = null;\r\n        this.params = null;\r\n        if (this.wrapper) {\r\n            this.wrapper.removeEventListener('click', this._onWrapperClick);\r\n            this.wrapper.parentNode.removeChild(this.wrapper);\r\n            this.wrapper = null;\r\n        }\r\n    }\r\n\r\n    createWrapper() {\r\n        const prevSpectrogram = this.container.querySelector('spectrogram');\r\n        if (prevSpectrogram) {\r\n            this.container.removeChild(prevSpectrogram);\r\n        }\r\n        const wsParams = this.wavesurfer.params;\r\n        this.wrapper = document.createElement('spectrogram');\r\n        // if labels are active\r\n        if (this.params.labels) {\r\n            const labelsEl = (this.labelsEl = document.createElement('canvas'));\r\n            labelsEl.classList.add('spec-labels');\r\n            this.drawer.style(labelsEl, {\r\n                left: 0,\r\n                position: 'absolute',\r\n                zIndex: 9,\r\n                height: `${this.height * this.channels / this.pixelRatio}px`,\r\n                width: `${55 / this.pixelRatio}px`\r\n            });\r\n            this.wrapper.appendChild(labelsEl);\r\n            this.loadLabels(\r\n                'rgba(68,68,68,0.5)',\r\n                '12px',\r\n                '10px',\r\n                '',\r\n                '#fff',\r\n                '#f7f7f7',\r\n                'center',\r\n                '#specLabels'\r\n            );\r\n        }\r\n\r\n        this.drawer.style(this.wrapper, {\r\n            display: 'block',\r\n            position: 'relative',\r\n            userSelect: 'none',\r\n            webkitUserSelect: 'none',\r\n            height: `${this.height * this.channels / this.pixelRatio}px`\r\n        });\r\n\r\n        if (wsParams.fillParent || wsParams.scrollParent) {\r\n            this.drawer.style(this.wrapper, {\r\n                width: '100%',\r\n                overflowX: 'hidden',\r\n                overflowY: 'hidden'\r\n            });\r\n        }\r\n        this.container.appendChild(this.wrapper);\r\n\r\n        this.wrapper.addEventListener('click', this._onWrapperClick);\r\n    }\r\n\r\n    _wrapperClickHandler(event) {\r\n        event.preventDefault();\r\n        const relX = 'offsetX' in event ? event.offsetX : event.layerX;\r\n        this.fireEvent('click', relX / this.width || 0);\r\n    }\r\n\r\n    createCanvas() {\r\n        const canvas = (this.canvas = this.wrapper.appendChild(\r\n            document.createElement('canvas')\r\n        ));\r\n\r\n        this.spectrCc = canvas.getContext('2d');\r\n\r\n        this.util.style(canvas, {\r\n            position: 'absolute',\r\n            zIndex: 4\r\n        });\r\n    }\r\n\r\n    render() {\r\n        this.updateCanvasStyle();\r\n\r\n        if (this.frequenciesDataUrl) {\r\n            this.loadFrequenciesData(this.frequenciesDataUrl);\r\n        } else {\r\n            this.getFrequencies(this.drawSpectrogram);\r\n        }\r\n    }\r\n\r\n    updateCanvasStyle() {\r\n        const width = Math.round(this.width / this.pixelRatio) + 'px';\r\n        this.canvas.width = this.width;\r\n        this.canvas.height = this.height * this.channels;\r\n        this.canvas.style.width = width;\r\n    }\r\n\r\n    drawSpectrogram(frequenciesData, my) {\r\n        if (!isNaN(frequenciesData[0][0])) { // data is 1ch [sample, freq] format\r\n            // to [channel, sample, freq] format\r\n            frequenciesData = [frequenciesData];\r\n        }\r\n\r\n        const spectrCc = my.spectrCc;\r\n        const height = my.height;\r\n        const width = my.width;\r\n        const freqFrom = my.buffer.sampleRate / 2;\r\n        const freqMin = my.frequencyMin;\r\n        const freqMax = my.frequencyMax;\r\n\r\n        if (!spectrCc) {\r\n            return;\r\n        }\r\n\r\n        for (let c = 0; c < frequenciesData.length; c++) { // for each channel\r\n            const pixels = my.resample(frequenciesData[c]);\r\n            const imageData = new ImageData(width, height);\r\n\r\n            for (let i = 0; i < pixels.length; i++) {\r\n                for (let j = 0; j < pixels[i].length; j++) {\r\n                    const colorMap = my.colorMap[pixels[i][j]];\r\n                    const redIndex = ((height - j) * width + i) * 4;\r\n                    imageData.data[redIndex] = colorMap[0] * 255;\r\n                    imageData.data[redIndex + 1] = colorMap[1] * 255;\r\n                    imageData.data[redIndex + 2] = colorMap[2] * 255;\r\n                    imageData.data[redIndex + 3] = colorMap[3] * 255;\r\n                }\r\n            }\r\n\r\n            // scale and stack spectrograms\r\n            createImageBitmap(imageData).then(renderer =>\r\n                spectrCc.drawImage(renderer,\r\n                    0, height * (1 - freqMax / freqFrom), // source x, y\r\n                    width, height * (freqMax - freqMin) / freqFrom, // source width, height\r\n                    0, height * c, // destination x, y\r\n                    width, height // destination width, height\r\n                )\r\n            );\r\n        }\r\n    }\r\n\r\n    getFrequencies(callback) {\r\n        const fftSamples = this.fftSamples;\r\n        const buffer = (this.buffer = this.wavesurfer.backend.buffer);\r\n        const channels = this.channels;\r\n\r\n        if (!buffer) {\r\n            this.fireEvent('error', 'Web Audio buffer is not available');\r\n            return;\r\n        }\r\n\r\n        // This may differ from file samplerate. Browser resamples audio.\r\n        const sampleRate = buffer.sampleRate;\r\n        const frequencies = [];\r\n\r\n        let noverlap = this.noverlap;\r\n        if (!noverlap) {\r\n            const uniqueSamplesPerPx = buffer.length / this.canvas.width;\r\n            noverlap = Math.max(0, Math.round(fftSamples - uniqueSamplesPerPx));\r\n        }\r\n\r\n        const fft = new FFT(\r\n            fftSamples,\r\n            sampleRate,\r\n            this.windowFunc,\r\n            this.alpha\r\n        );\r\n\r\n        for (let c = 0; c < channels; c++) { // for each channel\r\n            const channelData = buffer.getChannelData(c);\r\n            const channelFreq = [];\r\n            let currentOffset = 0;\r\n\r\n            while (currentOffset + fftSamples < channelData.length) {\r\n                const segment = channelData.slice(\r\n                    currentOffset,\r\n                    currentOffset + fftSamples\r\n                );\r\n                const spectrum = fft.calculateSpectrum(segment);\r\n                const array = new Uint8Array(fftSamples / 2);\r\n                let j;\r\n                for (j = 0; j < fftSamples / 2; j++) {\r\n                    array[j] = Math.max(-255, Math.log10(spectrum[j]) * 45);\r\n                }\r\n                channelFreq.push(array);\r\n                // channelFreq: [sample, freq]\r\n\r\n                currentOffset += fftSamples - noverlap;\r\n            }\r\n            frequencies.push(channelFreq);\r\n            // frequencies: [channel, sample, freq]\r\n        }\r\n        callback(frequencies, this);\r\n    }\r\n\r\n    loadFrequenciesData(url) {\r\n        const request = this.util.fetchFile({ url: url });\r\n\r\n        request.on('success', data =>\r\n            this.drawSpectrogram(JSON.parse(data), this)\r\n        );\r\n        request.on('error', e => this.fireEvent('error', e));\r\n\r\n        return request;\r\n    }\r\n\r\n    freqType(freq) {\r\n        return freq >= 1000 ? (freq / 1000).toFixed(1) : Math.round(freq);\r\n    }\r\n\r\n    unitType(freq) {\r\n        return freq >= 1000 ? 'KHz' : 'Hz';\r\n    }\r\n\r\n    loadLabels(\r\n        bgFill,\r\n        fontSizeFreq,\r\n        fontSizeUnit,\r\n        fontType,\r\n        textColorFreq,\r\n        textColorUnit,\r\n        textAlign,\r\n        container\r\n    ) {\r\n        const frequenciesHeight = this.height;\r\n        bgFill = bgFill || 'rgba(68,68,68,0)';\r\n        fontSizeFreq = fontSizeFreq || '12px';\r\n        fontSizeUnit = fontSizeUnit || '10px';\r\n        fontType = fontType || 'Helvetica';\r\n        textColorFreq = textColorFreq || '#fff';\r\n        textColorUnit = textColorUnit || '#fff';\r\n        textAlign = textAlign || 'center';\r\n        container = container || '#specLabels';\r\n        const bgWidth = 55;\r\n        const getMaxY = frequenciesHeight || 512;\r\n        const labelIndex = 5 * (getMaxY / 256);\r\n        const freqStart = this.frequencyMin;\r\n        const step = (this.frequencyMax - freqStart) / labelIndex;\r\n\r\n        // prepare canvas element for labels\r\n        const ctx = this.labelsEl.getContext('2d');\r\n        this.labelsEl.height = this.height * this.channels;\r\n        this.labelsEl.width = bgWidth;\r\n\r\n        if (!ctx) {\r\n            return;\r\n        }\r\n\r\n        for (let c = 0; c < this.channels; c++) { // for each channel\r\n            // fill background\r\n            ctx.fillStyle = bgFill;\r\n            ctx.fillRect(0, c * getMaxY, bgWidth, (1 + c) * getMaxY);\r\n            ctx.fill();\r\n            let i;\r\n\r\n            // render labels\r\n            for (i = 0; i <= labelIndex; i++) {\r\n                ctx.textAlign = textAlign;\r\n                ctx.textBaseline = 'middle';\r\n\r\n                const freq = freqStart + step * i;\r\n                const label = this.freqType(freq);\r\n                const units = this.unitType(freq);\r\n                const yLabelOffset = 2;\r\n                const x = 16;\r\n                let y;\r\n\r\n                if (i == 0) {\r\n                    y = (1 + c) * getMaxY + i - 10;\r\n                    // unit label\r\n                    ctx.fillStyle = textColorUnit;\r\n                    ctx.font = fontSizeUnit + ' ' + fontType;\r\n                    ctx.fillText(units, x + 24, y);\r\n                    // freq label\r\n                    ctx.fillStyle = textColorFreq;\r\n                    ctx.font = fontSizeFreq + ' ' + fontType;\r\n                    ctx.fillText(label, x, y);\r\n                } else {\r\n                    y = (1 + c) * getMaxY - i * 50 + yLabelOffset;\r\n                    // unit label\r\n                    ctx.fillStyle = textColorUnit;\r\n                    ctx.font = fontSizeUnit + ' ' + fontType;\r\n                    ctx.fillText(units, x + 24, y);\r\n                    // freq label\r\n                    ctx.fillStyle = textColorFreq;\r\n                    ctx.font = fontSizeFreq + ' ' + fontType;\r\n                    ctx.fillText(label, x, y);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    updateScroll(e) {\r\n        if (this.wrapper) {\r\n            this.wrapper.scrollLeft = e.target.scrollLeft;\r\n        }\r\n    }\r\n\r\n    resample(oldMatrix) {\r\n        const columnsNumber = this.width;\r\n        const newMatrix = [];\r\n\r\n        const oldPiece = 1 / oldMatrix.length;\r\n        const newPiece = 1 / columnsNumber;\r\n        let i;\r\n\r\n        for (i = 0; i < columnsNumber; i++) {\r\n            const column = new Array(oldMatrix[0].length);\r\n            let j;\r\n\r\n            for (j = 0; j < oldMatrix.length; j++) {\r\n                const oldStart = j * oldPiece;\r\n                const oldEnd = oldStart + oldPiece;\r\n                const newStart = i * newPiece;\r\n                const newEnd = newStart + newPiece;\r\n\r\n                const overlap =\r\n                    oldEnd <= newStart || newEnd <= oldStart\r\n                        ? 0\r\n                        : Math.min(\r\n                            Math.max(oldEnd, newStart),\r\n                            Math.max(newEnd, oldStart)\r\n                        ) -\r\n                        Math.max(\r\n                            Math.min(oldEnd, newStart),\r\n                            Math.min(newEnd, oldStart)\r\n                        );\r\n                let k;\r\n                /* eslint-disable max-depth */\r\n                if (overlap > 0) {\r\n                    for (k = 0; k < oldMatrix[0].length; k++) {\r\n                        if (column[k] == null) {\r\n                            column[k] = 0;\r\n                        }\r\n                        column[k] += (overlap / newPiece) * oldMatrix[j][k];\r\n                    }\r\n                }\r\n                /* eslint-enable max-depth */\r\n            }\r\n\r\n            const intColumn = new Uint8Array(oldMatrix[0].length);\r\n            let m;\r\n\r\n            for (m = 0; m < oldMatrix[0].length; m++) {\r\n                intColumn[m] = column[m];\r\n            }\r\n\r\n            newMatrix.push(intColumn);\r\n        }\r\n\r\n        return newMatrix;\r\n    }\r\n}\r\n"],"names":["FFT","bufferSize","sampleRate","windowFunc","alpha","bandwidth","sinTable","Float32Array","cosTable","windowValues","reverseTable","Uint32Array","peakBand","peak","i","Math","abs","cos","PI","pow","E","undefined","sin","Error","limit","bit","calculateSpectrum","buffer","real","imag","bSi","sqrt","rval","ival","mag","spectrum","k","floor","log","LN2","length","halfSize","phaseShiftStepReal","phaseShiftStepImag","currentPhaseShiftReal","currentPhaseShiftImag","off","tr","ti","tmpReal","fftStep","N","SpectrogramPlugin","create","params","name","deferInit","staticProps","instance","constructor","ws","wavesurfer","util","frequenciesDataUrl","_onScroll","e","updateScroll","_onRender","render","_onWrapperClick","_wrapperClickHandler","_onReady","drawer","container","document","querySelector","colorMap","cmEntry","val","push","width","pixelRatio","fftSamples","height","noverlap","splitChannels","channels","backend","numberOfChannels","frequencyMin","frequencyMax","createWrapper","createCanvas","wrapper","addEventListener","on","init","isReady","once","destroy","unAll","un","removeEventListener","parentNode","removeChild","prevSpectrogram","wsParams","createElement","labels","labelsEl","classList","add","style","left","position","zIndex","appendChild","loadLabels","display","userSelect","webkitUserSelect","fillParent","scrollParent","overflowX","overflowY","event","preventDefault","relX","offsetX","layerX","fireEvent","canvas","spectrCc","getContext","updateCanvasStyle","loadFrequenciesData","getFrequencies","drawSpectrogram","round","frequenciesData","my","isNaN","freqFrom","freqMin","freqMax","c","pixels","resample","imageData","ImageData","j","redIndex","data","createImageBitmap","then","renderer","drawImage","callback","frequencies","uniqueSamplesPerPx","max","fft","channelData","getChannelData","channelFreq","currentOffset","segment","slice","array","Uint8Array","log10","url","request","fetchFile","JSON","parse","freqType","freq","toFixed","unitType","bgFill","fontSizeFreq","fontSizeUnit","fontType","textColorFreq","textColorUnit","textAlign","frequenciesHeight","bgWidth","getMaxY","labelIndex","freqStart","step","ctx","fillStyle","fillRect","fill","textBaseline","label","units","yLabelOffset","x","y","font","fillText","scrollLeft","target","oldMatrix","columnsNumber","newMatrix","oldPiece","newPiece","column","Array","oldStart","oldEnd","newStart","newEnd","overlap","min","intColumn","m"],"sourceRoot":""}