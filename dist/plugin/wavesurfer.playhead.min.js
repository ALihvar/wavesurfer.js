/*!
 * wavesurfer.js playhead plugin 6.0.4 (2022-09-28)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("WaveSurfer",[],t):"object"==typeof exports?exports.WaveSurfer=t():(e.WaveSurfer=e.WaveSurfer||{},e.WaveSurfer.playhead=t())}(self,(()=>(()=>{"use strict";var e={d:(t,i)=>{for(var r in i)e.o(i,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:i[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>i});class i{static create(e){return{name:"playhead",deferInit:!(!e||!e.deferInit)&&e.deferInit,params:e,instance:i}}constructor(e,t){this.params=e,this.options={},["draw","moveOnSeek","returnOnPause"].forEach((t=>{this.options[t]=!(t in e)||e[t]})),this.wavesurfer=t,this.util=t.util,this.style=this.util.style,this.markerWidth=21,this.markerHeight=16,this.playheadTime=0,this.unFuns=[],this._onResize=()=>{this._updatePlayheadPosition()},this._onReady=()=>{this.wrapper=this.wavesurfer.drawer.wrapper,this._updatePlayheadPosition()}}_onBackendCreated(){this.wrapper=this.wavesurfer.drawer.wrapper,this.options.draw&&(this._createPlayheadElement(),window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0),this.wavesurferOn("zoom",this._onResize)),this.wavesurferOn("pause",(()=>{this.options.returnOnPause&&this.wavesurfer.setCurrentTime(this.playheadTime)})),this.wavesurferOn("seek",(()=>{this.options.moveOnSeek&&(this.playheadTime=this.wavesurfer.getCurrentTime(),this._updatePlayheadPosition())})),this.playheadTime=this.wavesurfer.getCurrentTime()}wavesurferOn(e,t){let i=this.wavesurfer.on(e,t);return this.unFuns.push((()=>{this.wavesurfer.un(e,t)})),i}init(){if(this.wavesurfer.isReady)this._onBackendCreated(),this._onReady();else{this.wavesurfer.once("ready",(()=>this._onReady())),this.wavesurfer.once("backend-created",(()=>this._onBackendCreated()))}}destroy(){this.unFuns.forEach((e=>e())),this.unFuns=[],this.wrapper.removeChild(this.element),window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)}setPlayheadTime(e){this.playheadTime=e,this.wavesurfer.isPlaying()||this.wavesurfer.setCurrentTime(e),this._updatePlayheadPosition()}_createPointerSVG(){const e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg"),i=document.createElementNS(e,"path");return t.setAttribute("viewBox","0 0 33 30"),i.setAttribute("d","M16.75 31 31.705 5.566A3 3 0 0 0 29.146 1H4.354a3 3 0 0 0-2.56 4.566L16.75 31z"),i.setAttribute("stroke","#979797"),i.setAttribute("fill","#CF2F00"),t.appendChild(i),this.style(t,{width:this.markerWidth+"px",height:this.markerHeight+"px",cursor:"pointer","z-index":5}),t}_createPlayheadElement(){const e=document.createElement("playhead");e.className="wavesurfer-playhead",this.style(e,{position:"absolute",height:"100%",display:"flex","flex-direction":"column"});const t=this._createPointerSVG();e.appendChild(t),t.addEventListener("click",(e=>{e.stopPropagation(),this.wavesurfer.setCurrentTime(this.playheadTime)}));const i=document.createElement("div");this.style(i,{"flex-grow":1,"margin-left":this.markerWidth/2-.5+"px",background:"black",width:"1px",opacity:.1}),e.appendChild(i),this.element=e,this.wrapper.appendChild(e)}_updatePlayheadPosition(){if(!this.element)return;const e=this.wavesurfer.getDuration(),t=this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio,i=this.playheadTime/e;this.style(this.element,{left:t*i-this.markerWidth/2+"px"})}}return t})()));
//# sourceMappingURL=wavesurfer.playhead.min.js.map